<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>采购-采购单详情页</title>
    <link rel="stylesheet" href="css/public.css"/>
    <link rel="stylesheet" href="css/page.css"/>
    <link rel="stylesheet" href="css/member.css"/>
    <link rel="stylesheet" href="css/banner.css"/>
    <link rel="stylesheet" href="css/tab.css"/>
    <link rel="stylesheet" href="css/table.css"/>
    <link rel="stylesheet" href="css/select.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/font-awesome-ie7.css">
    <!--[if lt IE 10]>
    <script src="js/html5shiv.min.js"></script>
    <![endif]-->
</head>
<body>

<div id="app">
    <!--网站顶部-->
    <div class="top">
        <div class="container">
            <topnav></topnav>
            <topright></topright>
        </div>
    </div>
    <!--网站头部-->
    <header>
        <div class="container">
            <a href="index.html" class="logo">
                <img src="images/logo.png" alt=""/>
            </a>
            <div class="search">
                <div class="search-form">
                    <div class="input"><input type="text"/></div>
                    <div class="button">
                        <button type="submit"><i class="fa fa-search"></i></button>
                    </div>
                </div>
                <div class="search-list">
                    <a class="selected" href="javascript:;">A级牛肉</a>
                    <span>|</span>
                    <a href="javascript:;">进口猪肉</a>
                    <span>|</span>
                    <a href="javascript:;">A级排骨肉</a>
                    <span>|</span>
                    <a href="javascript:;">A级牛肉</a>
                    <span>|</span>
                    <a href="javascript:;">进口猪肉</a>
                    <span>|</span>
                    <a class="selected" href="javascript:;">A级排骨肉</a>
                </div>
            </div>
            <div class="cart">购物车中<span>0</span>件</div>
        </div>
    </header>
    <!--网站导航-->
    <nav>
        <div class="container">
            <dl>
                <classificationnav></classificationnav>
                <dd><a href="index.html">首页</a></dd>
                <dd><a href="资源.html">资源</a></dd>
                <dd><a class="selected" href="采购.html">采购</a></dd>
                <dd><a href="搜索.html">搜索</a></dd>
                <dd><a href="物流.html">物流</a></dd>
                <dd><a href="行情-实时成交价.html">行情</a></dd>
                <dd><a href="积分商城.html">积分商城</a></dd>
                <dd><a href="member-会员俱乐部.html">会员俱乐部</a></dd>
            </dl>
        </div>
    </nav>
    <!-- 内容主体区 -->
    <div class="content-main">
        <div class="container">
            <!-- 面包屑导航 -->
            <div class="bread-crumbs">
                <a href="javascript:;">首页</a>
                <span><i class="fa fa-angle-double-right"></i></span>
                <a href="javascript:;">采购</a>
                <span><i class="fa fa-angle-double-right"></i></span>
                <a href="javascript:;" class="selected">采购单详情</a>
            </div>
            <!-- 采购-发布采购单 -->
            <div id="caigou">
                <div class="member-tit">
                    <p>采购单详情</p>
                </div>
                <div class="proof">
                    <div class="member-column">
                        <div class="member-detailtit">{{purchase.purchaseTitle}}</div>
                        <div class="detail-con">
                            <dl>
                                <dt>产品：</dt>
                                <dd>{{purchase.productName}}</dd>
                                <dt>产地要求：</dt>
                                <dd>{{purchase.originRequirements}}</dd>
                                <dt>规格型号：</dt>
                                <dd>{{purchase.specificationType}}</dd>
                                <dt>级别要求：</dt>
                                <dd>{{purchase.level}}</dd>
                                <dt>仓库要求：</dt>
                                <dd>{{purchase.warehouse}}</dd>
                                <dt>期/现货：</dt>
                                <dd>{{purchase.purchaseSport}}</dd>
                                <dt>价格要求：</dt>
                                <dd>{{purchase.purchasePrice}}</dd>
                                <dt>采购说明：</dt>
                                <dd>{{purchase.procurementNotes}}</dd>
                                <dt>付款方式：</dt>
                                <dd>{{purchase.paymentMethod}}</dd>
                                <dt>发票类型：</dt>
                                <dd>{{purchase.invoiceType}}</dd>
                                <dt>收货地址：</dt>
                                <dd>{{purchase.receivingAddress}}</dd>
                                <dt>采购截止时间：</dt>
                                <dd>{{purchase.procurementDeadline}}</dd>
                            </dl>
                        </div>
                    </div>
                    <div class="member-column">
                        <div class="cg-contact">
                            <div class="member-detailtit">联系方式</div>
                            <div class="detail-con">
                                <div class="member-exclusive">
                                    <div class="exclusive-tit">联系交易员</div>
                                    <div class="exclusive-con">
                                        <div class="exclusive-area">华南区--张三</div>
                                        <div class="exclusive-tel">1345678910123</div>
                                    </div>
                                </div>
                                <dl>
                                    <dt>联系人：</dt>
                                    <dd><p>{{purchase.contactPeople}}</p></dd>
                                    <dt>公司名称：</dt>
                                    <dd>
                                        <p>{{purchase.companyName}}</p>
                                    </dd>
                                    <dt>手机号：</dt>
                                    <dd>
                                        <p>{{purchase.phone}}</p>
                                    </dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 填写报价信息 -->
                <div class="proof">
                    <div class="member-column">
                        <div class="member-subtit">填写报价信息</div>
                        <div class="member-right">
                            <div class="controls">
                                <p>报价人：</p>
                                <input type="text" v-model="quotation.quotePeople" class="input03 w320">
                            </div>
                        </div>
                        <div class="member-detailtit">选择商品：</div>
                        <!-- 搜索列表 -->
                        <div class="search-member">
                            <dl>
                                <dd>
                                    <label>
                                        <p>产品名称：</p>
                                        <input type="text" v-model="warehouseSearch.productName" class="input02 w125"/>
                                    </label>
                                    <label>
                                        <p>产品规格：</p>
                                        <select v-model="warehouseSearch.specificationType" class="w125">
                                            <option value="80g">80g</option>
                                            <option value="100g">100g</option>
                                            <option value="120g">120g</option>
                                            <option value="150g">150g</option>
                                            <option value="180g">180g</option>
                                        </select>
                                    </label>
                                    <div class="search-btn">
                                        <input type="submit" class="btn03" value="检索" @click="search()">
                                    </div>
                                </dd>
                            </dl>
                        </div>
                        <!-- 加入资源单 -->
                        <div class="method-table">
                            <table>
                                <thead>
                                <tr>
                                    <th width="90px;">分类</th>
                                    <th>产品名称</th>
                                    <th>产地</th>
                                    <th>规格型号</th>
                                    <th>级别</th>
                                    <th>数量(KG)</th>
                                    <th>单价</th>
                                    <th width="90px;">货币</th>
                                    <th width="90px;">期/现货</th>
                                    <th>仓库</th>
                                    <th>备注</th>
                                    <th style="width:90px; text-align: center;">操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr v-for="warehouse in warehouses">
                                    <td>{{warehouse.classificationName}}</td>
                                    <td>{{warehouse.productName}}</td>
                                    <td>{{warehouse.place}}</td>
                                    <td>{{warehouse.specificationType}}</td>
                                    <td>{{warehouse.level}}</td>
                                    <td>{{warehouse.quantity}}</td>
                                    <td>{{warehouse.price}}</td>
                                    <td>{{warehouse.currency}}</td>
                                    <td>{{warehouse.sport}}</td>
                                    <td>{{warehouse.warehouse}}</td>
                                    <td>{{warehouse.remarks}}</td>
                                    <td><a class="btn04 w80" href="javascript:;" @click="addQuotation(warehouse)">加入报价单</a></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="method-table">
                            <h6>生成报价单：</h6>
                            <table>
                                <thead>
                                    <tr>
                                        <th width="90px;">分类</th>
                                        <th>产品名称</th>
                                        <th>产地</th>
                                        <th>规格型号</th>
                                        <th>级别</th>
                                        <th>数量(KG)</th>
                                        <th>单价</th>
                                        <th width="90px;">货币</th>
                                        <th width="90px;">期/现货</th>
                                        <th>仓库</th>
                                        <th>备注</th>
                                        <th style="width:90px; text-align: center;">操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>{{quotation.classificationName}}</td>
                                        <td>{{quotation.productName}}</td>
                                        <td>{{quotation.place}}</td>
                                        <td>{{quotation.specificationType}}</td>
                                        <td>{{quotation.level}}</td>
                                        <td>{{quotation.quantity}}</td>
                                        <td><input type="text" class="input05" v-model="quotation.price"></td>
                                        <td>{{quotation.currency}}</td>
                                        <td>{{quotation.sport}}</td>
                                        <td>{{quotation.warehouse}}</td>
                                        <td>{{quotation.remarks}}</td>
                                        <td><a class="btn04 w80" href="javascript:;" @click="removeQuotation()">删除</a></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- 加入资源单 结束 -->
                        <div class="member-right">
                            <div class="controls">
                                <p>地址：</p>
                                <input type="text" v-model="quotation.address" class="input03 w320">
                            </div>
                            <div class="controls">
                                <p>联系手机：</p>
                                <input type="text" v-model="phone" class="input03 w320">
                            </div>
                            <input type="text" class="btn01 submit w155" value="提交报价" @click="commit">
                            <!-- 不是供应商 -->
                            <div class="no-gys"  v-if="this.state != true ">
                                <div class="no-tit"><i class="fa fa-exclamation-circle"></i>您还不是供应商，优质供应商才能参与报价</div>
                                <div class="no-btns">
                                    <a href="javascript:;" class="btn01">成为供应商</a>
                                    <a href="javascript:;" class="btn02">取消</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--网站底部-->
    <footer>
        <div class="footer-top">
            <div class="container">
                <div class="footer-left">
                    <div class="footer-logo"><img src="images/logo.png" alt=""/></div>
                    <div class="footer-tel">
                        <h6>服务热线：</h6>
                        <p>400-888-8888</p>
                    </div>
                </div>
                <div class="footer-nav">
                    <dl style="background: url(images/footer-icon01.png) no-repeat top left;">
                        <dt><a href="javascript:;">购物指南</a></dt>
                        <dd><a href="">购物流程</a><a href="">订货方式</a><a href="">联系客服</a><a href="">交易条款</a></dd>
                    </dl>
                    <dl style="background: url(images/footer-icon02.png) no-repeat top left;">
                        <dt><a href="javascript:;">支付方式</a></dt>
                        <dd><a href="">银行付款</a><a href="">在线支付</a><a href="">组合支付</a></dd>
                    </dl>
                    <dl style="background: url(images/footer-icon03.png) no-repeat top left;">
                        <dt><a href="javascript:;">物流帮助</a></dt>
                        <dd><a href="">如何找车</a><a href="">常见问题</a><a href="">运送流程</a></dd>
                    </dl>
                    <dl style="background: url(images/footer-icon04.png) no-repeat top left;">
                        <dt><a href="javascript:;">售后服务</a></dt>
                        <dd><a href="">售后服务总则</a><a href="">服务政策</a></dd>
                    </dl>
                    <dl style="background: url(images/footer-icon05.png) no-repeat top left;">
                        <dt><a href="javascript:;">帮助中心</a></dt>
                        <dd><a href="">网点分布</a><a href="">加盟商区</a></dd>
                    </dl>
                </div>
            </div>
        </div>
        <div class="copy">
            <div class="copy-nav">
                <a href="javascript:;">关于我们</a>
                <span>|</span>
                <a href="javascript:;">法律声明</a>
                <span>|</span>
                <a href="javascript:;">诚聘英才</a>
                <span>|</span>
                <a href="javascript:;">联系我们</a>
                <span>|</span>
                <a href="javascript:;">友情链接</a>
            </div>
            <p>Copyright <i class="fa fa-copyright"></i> 超鲜网 粤ICP备 13013915号-3 ICP证：粤B2-201401448</p>
        </div>
    </footer>
</div>

</body>
</html>


<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="js/global.js"></script>
<script type="text/javascript" src="js/jquery.accordion.js"></script>
<!--<script type="text/javascript" src="js/jquery.selectBox.js"></script>-->
<script src="js/axios-0.18.0.js"></script>
<script src="js/vuejs-2.5.16.js"></script>
<script src="components/top.js"></script>
<script src="components/top-right.js"></script>
<script src="components/classifications.js"></script>
<script src="js/api.1.js"></script>
<script>
    new Vue({

        el:"#app",
        data:{
            purchase:{
                purchaseId:""
            },
            user:{
                phone:"",

            },
            phone:"",
            state:false, //状态

            commodity:{},
            warehouseSearch:{
                productName:"",
                specificationType:"",
                phone: localStorage.getItem("phone")
            },
            warehouses:[],   //仓库里面的商品
            quotation:{}     //新生成的报价单
        },
        methods:{
            //提交
            commit:function(){
                if(this.state == false){
                    alert("您还不是供应商,请前往升级")
                }else{
                    this.quotation.quotationId = null;
                    //提交
                    this.quotation.phone =this.phone ;
                    saveQuotation(this.quotation).then(res => {
                        console.log(res.data.data)
                        alert("条件报价单成功")
                    })
                }
            },
            //检索
            search: function () {
                if (this.state == false) {
                    alert("您还不是供应商,请前往升级")
                } else {
                    //提交
                    console.log(this.warehouseSearch)
                    searchQuotation(this.warehouseSearch).then(res => {
                        this.warehouses = res.data.data.data;
                    })
                }
            },
            addQuotation: function (item) {
                this.quotation = item;
            },
            removeQuotation: function () {
                this.quotation = {}
            }
        },
        created() {
            this.purchase.purchaseId = localStorage.getItem("purchaseId");

            findPurchasesByid(this.purchase).then(res => {
                this.purchase = res.data.data.data;
                console.log(this.purchase)
            });
            //获取用户
            this.user.phone = localStorage.getItem("phone")
            getUserByPhone(this.user).then(res => {
                if (res.data.data.data.state = "1") {
                    this.state = true
                }
            })
        }
    })
</script>